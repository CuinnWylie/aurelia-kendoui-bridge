{"version":3,"sources":["common/decorators.js"],"names":[],"mappings":";;;;;;AAaO,WAAS,iBAAT,CAA2B,WAA3B,EAAsE;AAAA,QAAtB,eAAsB,yDAAJ,EAAI;;AAC3E,WAAO,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC;AAGvC,UAAI,mBAAmB,SAAS,cAAT,CAAwB,SAAS,QAAjC,EAA2C,oBAA3C,EAAiE,MAAjE,CAAvB;AACA,UAAI,YAAa,UAAU,QAAV,IAAsB,IAAI,SAAJ,EAAvC;AACA,UAAI,oBAAoB,UAAU,GAAV,CAAc,iBAAd,CAAxB;AACA,UAAI,OAAO,UAAU,GAAV,CAAc,IAAd,CAAX;AACA,UAAI,aAAa,kBAAkB,aAAlB,CAAgC,WAAhC,EAA6C,eAA7C,CAAjB;;AAEA,iBAAW,IAAX,CAAgB,QAAhB;AACA,iBAAW,IAAX,CAAgB,SAAhB;AACA,iBAAW,IAAX,CAAgB,QAAhB;;AAEA,WAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,WAAW,MAA/B,EAAuC,GAAvC,EAA4C;AAC1C,YAAI,SAAS,WAAW,CAAX,CAAb;;AAGA,YAAI,uBAAuB;AACzB,gBAAM,KAAK,uBAAL,CAA6B,MAA7B;AADmB,SAA3B;;AAIA,YAAI,WAAW,QAAf,EAAyB;AACvB,+BAAqB,kBAArB,GAA0C,YAAY,MAAtD;AACD;;AAED,YAAI,OAAO,IAAI,gBAAJ,CAAqB,oBAArB,CAAX;AACA,aAAK,YAAL,CAAkB,MAAlB,EAA0B,gBAA1B,EAA4C,UAA5C;AACD;AACF,KA5BD;AA6BD;;+BA9Be,iB;;AAiCT,WAAS,OAAT,GAAmB;AACxB,WAAO,UAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC;AACvC,UAAI,YAAY,CAAC,UAAU,QAAV,IAAsB,IAAI,SAAJ,EAAvB,EAAwC,GAAxC,CAA4C,SAA5C,CAAhB;AACA,UAAI,MAAM,WAAW,KAArB;;AAEA,iBAAW,KAAX,GAAmB,YAAkB;AAAA;;AAAA,0CAAN,IAAM;AAAN,cAAM;AAAA;;AACnC,kBAAU,SAAV,CAAoB;AAAA,iBAAM,IAAI,KAAJ,QAAgB,IAAhB,CAAN;AAAA,SAApB;AACD,OAFD;;AAIA,aAAO,UAAP;AACD,KATD;AAUD;;qBAXe,O;;;;AA9CR,sB,sBAAA,gB;AAAkB,0B,sBAAA,oB;;AAClB,e,+BAAA,S;;AACA,c,oBAAA,Q;;AACA,iB,mBAAA,W;;AACA,e,qBAAA,S;;AACA,uB,sBAAA,iB;;AACA,U,SAAA,I","file":"common/decorators.js","sourceRoot":"/source/","sourcesContent":["import {BindableProperty, HtmlBehaviorResource} from 'aurelia-templating';\r\nimport {Container} from 'aurelia-dependency-injection';\r\nimport {metadata} from 'aurelia-metadata';\r\nimport {bindingMode} from 'aurelia-binding';\r\nimport {TaskQueue} from 'aurelia-task-queue';\r\nimport {ControlProperties} from './control-properties';\r\nimport {Util} from './util';\r\n\r\n/**\r\n* Creates a BindableProperty for every option defined in a Kendo control\r\n* in the option property of a Kendo control\r\n* @param controlName The Kendo control of which the options should be converted into bindable properties\r\n*/\r\nexport function generateBindables(controlName: string, extraProperties = []) {\r\n  return function(target, key, descriptor) {\r\n    // get or create the HtmlBehaviorResource\r\n    // on which we're going to create the BindableProperty's\r\n    let behaviorResource = metadata.getOrCreateOwn(metadata.resource, HtmlBehaviorResource, target);\r\n    let container = (Container.instance || new Container());\r\n    let controlProperties = container.get(ControlProperties);\r\n    let util = container.get(Util);\r\n    let optionKeys = controlProperties.getProperties(controlName, extraProperties);\r\n\r\n    optionKeys.push('widget');\r\n    optionKeys.push('options');\r\n    optionKeys.push('noInit');\r\n\r\n    for (let i = 0; i < optionKeys.length; i++) {\r\n      let option = optionKeys[i];\r\n\r\n      // set the name of the bindable property to the option\r\n      let nameOrConfigOrTarget = {\r\n        name: util.getBindablePropertyName(option)\r\n      };\r\n\r\n      if (option === 'widget') {\r\n        nameOrConfigOrTarget.defaultBindingMode = bindingMode.twoWay;\r\n      }\r\n\r\n      let prop = new BindableProperty(nameOrConfigOrTarget);\r\n      prop.registerWith(target, behaviorResource, descriptor);\r\n    }\r\n  };\r\n}\r\n\r\n\r\nexport function delayed() {\r\n  return function(target, key, descriptor) {\r\n    let taskQueue = (Container.instance || new Container()).get(TaskQueue);\r\n    let ptr = descriptor.value;\r\n\r\n    descriptor.value = function(...args) {\r\n      taskQueue.queueTask(() => ptr.apply(this, args));\r\n    };\r\n\r\n    return descriptor;\r\n  };\r\n}\r\n"]}
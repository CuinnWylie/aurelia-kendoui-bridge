{"version":3,"sources":["common/control-properties.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAQ,e,cAAA,S;;AACA,Y,+BAAA,M;;AACA,U,SAAA,I;;;mCAOK,iB,WADZ,OAAO,IAAP,C;AAKC,mCAAY,IAAZ,EAAwB;AAAA;;AAAA,eAFxB,KAEwB,GAFhB,EAEgB;;AACtB,eAAK,IAAL,GAAY,IAAZ;AACD;;oCAQD,a,0BAAc,W,EAAqD;AAAA,cAAhC,eAAgC,yDAAd,EAAc;;AACjE,cAAI,KAAK,KAAL,CAAW,WAAX,CAAJ,EAA6B;AAC3B,mBAAO,KAAK,KAAL,CAAW,WAAX,CAAP;AACD;;AAGD,cAAI,WAAW,KAAK,mBAAL,CAAyB,WAAzB,CAAf;;AAEA,cAAI,WAAW,KAAK,sBAAL,CAA4B,WAA5B,CAAf;;AAGA,cAAI,OAAO,SAAS,MAAT,CAAgB,SAAS,MAAT,CAAgB;AAAA,mBAAQ,SAAS,OAAT,CAAiB,IAAjB,IAAyB,CAAjC;AAAA,WAAhB,CAAhB,CAAX;AACA,iBAAO,KAAK,MAAL,CAAY,gBAAgB,MAAhB,CAAuB;AAAA,mBAAQ,KAAK,OAAL,CAAa,IAAb,IAAqB,CAA7B;AAAA,WAAvB,CAAZ,CAAP;;AAEA,eAAK,KAAL,CAAW,WAAX,IAA0B,IAA1B;;AAEA,iBAAO,IAAP;AACD,S;;oCAOD,sB,mCAAuB,W,EAAqB;AAC1C,cAAI,CAAC,UAAU,WAAV,CAAL,EAA6B;AAC3B,kBAAM,IAAI,KAAJ,CAAa,WAAb,0CAAN;AACD;;AAED,iBAAO,UAAU,WAAV,CAAP;AACD,S;;oCAOD,mB,gCAAoB,W,EAA+B;AACjD,cAAI,SAAS,MAAM,MAAN,CAAa,EAAb,CAAgB,WAAhB,CAAb,EAA2C;AACzC,mBAAO,OAAO,IAAP,CAAY,MAAM,MAAN,CAAa,EAAb,CAAgB,WAAhB,EAA6B,MAA7B,CAAoC,SAApC,CAA8C,OAA1D,CAAP;AACD;;AAED,iBAAO,EAAP;AACD,S;;oCAMD,qB,kCAAsB,W,EAA+B;AAAA;;AACnD,cAAI,aAAa,KAAK,aAAL,CAAmB,WAAnB,CAAjB;;AAEA,cAAI,YAAY,WAAW,MAAX,CAAkB;AAAA,mBAAQ,MAAK,IAAL,CAAU,kBAAV,CAA6B,IAA7B,CAAR;AAAA,WAAlB,CAAhB;;AAEA,iBAAO,SAAP;AACD,S","file":"common/control-properties.js","sourceRoot":"/source/","sourcesContent":["import {bindables} from './bindables';\r\nimport {inject} from 'aurelia-dependency-injection';\r\nimport {Util} from './util';\r\n\r\n/***\r\n* Available properties (merged together from several locations) are stored here per controlName\r\n* so that this isn't done for each created wrapper instance\r\n*/\r\n@inject(Util)\r\nexport class ControlProperties {\r\n\r\n  cache = {};\r\n\r\n  constructor(util: Util) {\r\n    this.util = util;\r\n  }\r\n\r\n  /**\r\n  * Merges together available properties for a specific control\r\n  * and stores this in a cache so that this is done only once per control\r\n  * @param controlName the name of the kendo control (kendoGrid, kendoButton)\r\n  * @param extraProperties allows you to provide an extra list of available properties\r\n  */\r\n  getProperties(controlName: string, extraProperties = []): string[] {\r\n    if (this.cache[controlName]) {\r\n      return this.cache[controlName];\r\n    }\r\n\r\n    // get available properties of the options object inside a Kendo control\r\n    let options1 = this.getWidgetProperties(controlName);\r\n    // get available properties of the pre-generated bindables.json file\r\n    let options2 = this.getGeneratedProperties(controlName);\r\n\r\n    // merge together without duplicates\r\n    let keys = options1.concat(options2.filter(item => options1.indexOf(item) < 0));\r\n    keys = keys.concat(extraProperties.filter(item => keys.indexOf(item) < 0));\r\n\r\n    this.cache[controlName] = keys;\r\n\r\n    return keys;\r\n  }\r\n\r\n\r\n  /**\r\n  * returns a list of properties of a Kendo control that has been pre-generated (into bindables.js)\r\n  * @param controlName the name of the kendo control (kendoGrid, kendoButton)\r\n  */\r\n  getGeneratedProperties(controlName: string) {\r\n    if (!bindables[controlName]) {\r\n      throw new Error(`${controlName} not found in generated bindables.js`);\r\n    }\r\n\r\n    return bindables[controlName];\r\n  }\r\n\r\n  /*\r\n  * returns the intrinsic list of properties of a kendo control\r\n  * returns an empty array if the control is not loaded\r\n  * @param controlName the name of the kendo control (kendoGrid, kendoButton)\r\n  */\r\n  getWidgetProperties(controlName: string): string[] {\r\n    if (kendo && kendo.jQuery.fn[controlName]) {\r\n      return Object.keys(kendo.jQuery.fn[controlName].widget.prototype.options);\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  /*\r\n  * filters list of properties of a control by template property\r\n  * @param controlName the name of the kendo control (kendoGrid, kendoButton)\r\n  */\r\n  getTemplateProperties(controlName: string): string[] {\r\n    let properties = this.getProperties(controlName);\r\n\r\n    let templates = properties.filter(prop => this.util.isTemplateProperty(prop));\r\n\r\n    return templates;\r\n  }\r\n}\r\n"]}